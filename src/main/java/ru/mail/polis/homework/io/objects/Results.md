# Сравнение результатов сериализации

Тестирование проводилось с генерацией списков размером 500000 объектов класса `Animal` и "прогревом" в 2 запуска. Результаты тестирования представлены ниже:

```
DEFAULT SERIALIZATION
	Размер файла: 36568699 байт
	Время записи: 5413 мс
	Время чтения: 11191 мс

SERIALIZATION WITH METHODS
	Размер файла: 41026521 байт
	Время записи: 7079 мс
	Время чтения: 8663 мс

SERIALIZATION WITH EXTERNALIZABLE
	Размер файла: 41012322 байт
	Время записи: 7039 мс
	Время чтения: 8572 мс

CUSTOM SERIALIZATION
	Размер файла: 34370524 байт
	Время записи: 317 мс
	Время чтения: 380 мс
```

## Размер файла

Меньший размер файла получился у ручной сериализации, так как все поля объектов записываются "ручками" без дополнительной информации, которую хранят остальные способы. Далее идёт стандартная сериализация, которая путём скрытых оптимизаций при помощи JVM позволяет уменьшить размер файла. Что касается сериализаций *with methods* и *externalizable*, то они имеют практически одинаковый размер файлов (в рамках погрешности генерации исходных данных) из-за своей схожести в реализации, а также являются самыми большими файлами по сравнению с остальными. Задавшись вопросом *"А почему же эти две сериализации хуже остальных?"* я наткнулся на [сравнение производительности](https://carlosvin.github.io/langs/en/posts/serialization-java-serializable-externalizable/) `Serializable` и `Externalizable` и пришёл к выводу, что скорее всего неудачно реализовал сериализацию объектов, как минимум потому что использовал `writeObject()` для класса `AnimalOwner`. Также возможно они имеют больший размер из-за отсутствия оптимизации со стороны JVM, в то время как у обычной сериализации эта оптимизация присутствует, однако я не уверен в этом.

## Время записи

Явным победителем здесь является снова ручная сериализация по всё тем же причинам. Что касается остальных претендентов, то их результаты снова похожи - второе место занимает обычная сериализация, а последние - *with methods* и *externalizable* по всё тем же причинам.

## Время чтения

Снова безоговорочным победителем является ручная сериализация по тем же причинам. А вот второе место теперь занимают сериализации *with methods* и *externalizable*, а последнее обычная сериализация. Если верить всё тому же [сайту](https://carlosvin.github.io/langs/en/posts/serialization-java-serializable-externalizable/), то обычная сериализация, а точнее уже десериализация определяет типы объектов и их поля, затрачивая на это какое-то время, а реализуя методы для десериализации в *with methods* и *externalizable* мы явно указываем какие типы нужно считывать и в каком порядке, что увеличивает производительность.

## Выводы

Самым оптимальным способом сериализации для поставленной задачи оказалась **ручная сериализация**, которая является фаворитом по всем трём критериям сравнения. Что касается сериализаций *with methods* и *externalizable*, то возможно для них можно было достичь лучшей производительности путём ручного описания полей класса `AnimalOwner`, который в свою очередь является полем класса `Animal`.